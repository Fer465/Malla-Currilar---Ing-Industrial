<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Visual Interactiva - Ing. Industrial</title>
  <style>
    body {
      background-color: #f5fafe;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #4b90b3;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 1rem;
      margin-top: 2rem;
    }
    .semestre {
      background-color: #e0f0fa;
      padding: 1rem;
      border-radius: 12px;
      border: 1px solid #a3cde3;
    }
    .semestre h2 {
      margin-top: 0;
      color: #317a9c;
      text-align: center;
    }
    .curso {
      background-color: #ddd;
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 0.4rem;
      margin: 0.3rem 0;
      cursor: not-allowed;
      transition: background-color 0.3s ease, text-decoration 0.3s ease;
      color: #666;
    }
    .curso.desbloqueado {
      background-color: #cce7f7;
      color: #000;
      cursor: pointer;
    }
    .curso.aprobado {
      background-color: #a4d6ed !important;
      border-color: #5aa8ce;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <h1>Malla Visual Interactiva - Ingeniería Industrial</h1>
  <div class="grid" id="contenedor"></div>

  <script>
    const malla = {
      1: [
        { nombre: "Introducción a la Ingeniería Industrial", prerequisitos: [] },
        { nombre: "Matemática", prerequisitos: [] },
        { nombre: "Cálculo", prerequisitos: [] },
        { nombre: "Dibujo Industrial I", prerequisitos: [] },
        { nombre: "Identidad y Peruanidad", prerequisitos: [] },
        { nombre: "Taller de Argumentación", prerequisitos: [] },
        { nombre: "Taller de Artes", prerequisitos: [] }
      ],
      2: [
        { nombre: "Cálculo Integral", prerequisitos: ["Cálculo"] },
        { nombre: "Dibujo Industrial II", prerequisitos: ["Dibujo Industrial I"] },
        { nombre: "Química General", prerequisitos: [] },
        { nombre: "Física", prerequisitos: [] },
        { nombre: "Taller de Deportes", prerequisitos: [] },
        { nombre: "Taller de Lectura y Redacción", prerequisitos: [] }
      ],
      3: [
        { nombre: "Física II", prerequisitos: ["Física"] },
        { nombre: "Cálculo Vectorial", prerequisitos: ["Cálculo Integral"] },
        { nombre: "Ingeniería de Organización Industrial", prerequisitos: [] },
        { nombre: "Ciencias e Ingeniería de Materiales", prerequisitos: [] },
        { nombre: "Metodología del Trabajo Universitario", prerequisitos: [] },
        { nombre: "Responsabilidad Ciudadana y Ecología", prerequisitos: [] }
      ],
      4: [
        { nombre: "Procesos Industriales I", prerequisitos: ["Ciencias e Ingeniería de Materiales"] },
        { nombre: "Termodinámica", prerequisitos: ["Química General"] },
        { nombre: "Electrotecnia Industrial", prerequisitos: ["Física II"] },
        { nombre: "Estadística y Probabilidades", prerequisitos: ["Matemática"] },
        { nombre: "Innovación en Ingeniería", prerequisitos: ["Metodología del Trabajo Universitario"] },
        { nombre: "Taller de Bienestar y Felicidad", prerequisitos: [] },
        { nombre: "Taller de Coaching y Liderazgo", prerequisitos: [] },
        { nombre: "Taller de Inteligencia Emocional", prerequisitos: [] }
      ],
      5: [
        { nombre: "Procesos Industriales II", prerequisitos: ["Procesos Industriales I"] },
        { nombre: "Estudio del Trabajo", prerequisitos: ["Introducción a la Ingeniería Industrial"] },
        { nombre: "Computación Aplicada", prerequisitos: ["50 créditos aprobados"] },
        { nombre: "Filosofía y Ética", prerequisitos: [] },
        { nombre: "Ingeniería de Costos y Presupuestos", prerequisitos: ["Ingeniería de Organización Industrial"] },
        { nombre: "Ingeniería Económica", prerequisitos: ["55 créditos aprobados"] }
      ],
      6: [
        { nombre: "Sistemas de Organizaciones Industriales", prerequisitos: ["60 créditos aprobados"] },
        { nombre: "Estadística Aplicada a la Ingeniería Industrial", prerequisitos: ["Estadística y Probabilidades"] },
        { nombre: "Ingeniería de Plantas", prerequisitos: ["Estudio del Trabajo"] },
        { nombre: "Investigación Operativa I", prerequisitos: ["Cálculo Vectorial"] },
        { nombre: "Metodología de la Investigación en Ingeniería", prerequisitos: ["Innovación en Ingeniería"] },
        { nombre: "Tecnologías de Información", prerequisitos: ["60 créditos aprobados"] }
      ],
      7: [
        { nombre: "Control de Procesos", prerequisitos: ["Estadística Aplicada a la Ingeniería Industrial"] },
        { nombre: "Marketing Industrial", prerequisitos: ["100 créditos aprobados"] },
        { nombre: "Seguridad y Salud Ocupacional", prerequisitos: ["Sistemas de Organizaciones Industriales"] },
        { nombre: "Ergonomía", prerequisitos: ["100 créditos aprobados"] },
        { nombre: "Ingeniería Textil", prerequisitos: ["100 créditos aprobados"] },
        { nombre: "Investigación Operativa II", prerequisitos: ["Investigación Operativa I"] },
        { nombre: "Planeamiento y Control de la Producción", prerequisitos: ["Ingeniería de Costos y Presupuestos"] },
        { nombre: "Procesos Mineros y Metalúrgicos", prerequisitos: ["100 créditos aprobados"] }
      ],
      8: [
        { nombre: "Análisis de Decisiones I", prerequisitos: ["Ingeniería Económica"] },
        { nombre: "Automatización y Control", prerequisitos: ["Electrotecnia Industrial"] },
        { nombre: "Gestión de Mantenimiento", prerequisitos: ["120 créditos aprobados"] },
        { nombre: "Gestión Energética", prerequisitos: ["Termodinámica"] },
        { nombre: "Ingeniería del Producto", prerequisitos: ["Innovación en Ingeniería"] },
        { nombre: "Investigación de Mercados", prerequisitos: ["Marketing Industrial"] },
        { nombre: "Logística Integrada y Cadena de Abastecimientos", prerequisitos: ["Planeamiento y Control de la Producción"] },
        { nombre: "Procesos Industriales III", prerequisitos: ["120 créditos aprobados"] }
      ],
      9: [
        { nombre: "Estrategias en la Industria", prerequisitos: ["130 créditos aprobados"] },
        { nombre: "Análisis de Decisiones II", prerequisitos: ["Análisis de Decisiones I"] },
        { nombre: "Diagnóstico Industrial", prerequisitos: ["130 créditos aprobados"] },
        { nombre: "Gestión de Calidad", prerequisitos: ["Control de Procesos"] },
        { nombre: "Ingeniería de Proyectos Industriales", prerequisitos: ["Ingeniería del Producto"] },
        { nombre: "Manufactura Integrada", prerequisitos: ["130 créditos aprobados"] },
        { nombre: "Marketing Estratégico", prerequisitos: ["Marketing Industrial"] },
        { nombre: "Simulación de Sistemas", prerequisitos: ["Investigación Operativa II"] }
      ],
      10: [
        { nombre: "Seminario de Tesis", prerequisitos: ["Metodología de la Investigación en Ingeniería"] },
        { nombre: "Dirección de Operaciones Industriales", prerequisitos: ["160 créditos aprobados"] },
        { nombre: "Emprendimiento e Innovación", prerequisitos: ["140 créditos aprobados"] },
        { nombre: "Gestión Ambiental", prerequisitos: ["140 créditos aprobados"] },
        { nombre: "Gestión de Proyectos", prerequisitos: ["Ingeniería de Proyectos Industriales"] },
        { nombre: "Gestión del Talento Humano", prerequisitos: ["140 créditos aprobados"] },
        { nombre: "Ingeniería de Seguridad", prerequisitos: ["Seguridad y Salud Ocupacional"] },
        { nombre: "Logística Internacional", prerequisitos: ["Logística Integrada y Cadena de Abastecimientos"] }
      ]
    };

    const completados = new Set();
    const contenedor = document.getElementById("contenedor");
    const cursoElements = {};

    function calcularCreditosAprobados() {
      let total = 0;
      for (const semestre in malla) {
        for (const curso of malla[semestre]) {
          if (completados.has(curso.nombre)) {
            total += curso.creditos;
          }
        }
      }
      return total;
    }

    function renderMalla() {
      for (let i = 1; i <= 10; i++) {
        const col = document.createElement("div");
        col.className = "semestre";
        const titulo = document.createElement("h2");
        titulo.textContent = `Semestre ${i}`;
        col.appendChild(titulo);

        const electivos = malla[i]?.filter(c => c.tipo === "E") || [];

        (malla[i] || []).forEach(curso => {
          const div = document.createElement("div");
          div.className = "curso";
          div.textContent = curso.nombre;
          cursoElements[curso.nombre] = div;

          div.addEventListener("click", () => {
            if (!div.classList.contains("desbloqueado")) return;

            // Electivo: desmarcar otros
            if (curso.tipo === "E") {
              if (!div.classList.contains("aprobado")) {
                electivos.forEach(c => {
                  if (c.nombre !== curso.nombre) {
                    const el = cursoElements[c.nombre];
                    el.classList.remove("aprobado");
                    completados.delete(c.nombre);
                  }
                });
              }
            }

            div.classList.toggle("aprobado");
            if (div.classList.contains("aprobado")) {
              completados.add(curso.nombre);
            } else {
              completados.delete(curso.nombre);
            }
            actualizarDesbloqueo();
          });

          col.appendChild(div);
        });

        contenedor.appendChild(col);
      }
      actualizarDesbloqueo();
    }

    function actualizarDesbloqueo() {
      const creditos = calcularCreditosAprobados();
      for (let semestre in malla) {
        malla[semestre].forEach(curso => {
          const div = cursoElements[curso.nombre];
          const desbloqueado = curso.prerequisitos.every(pre => {
            if (pre.includes("créditos")) {
              const match = pre.match(/(\d+)/);
              return creditos >= parseInt(match[1]);
            }
            return completados.has(pre);
          });
          if (desbloqueado && !div.classList.contains("aprobado")) {
            div.classList.add("desbloqueado");
            div.style.cursor = "pointer";
          } else if (!div.classList.contains("aprobado")) {
            div.classList.remove("desbloqueado");
            div.style.cursor = "not-allowed";
          }
        });
      }
    }

    renderMalla();
  </script>
</body>
</html>

</html>
