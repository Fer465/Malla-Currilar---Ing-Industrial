<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Visual Interactiva - Ing. Industrial</title>
  <style>
    body {
      background-color: #fff7fc;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      color: #c85ca3;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 1rem;
      margin-top: 2rem;
    }
    .semestre {
      background-color: #ffe5f1;
      padding: 1rem;
      border-radius: 12px;
      border: 1px solid #f5a4d1;
    }
    .semestre h2 {
      margin-top: 0;
      color: #b34b90;
      text-align: center;
    }
    .curso {
      background-color: #ddd; /* gris inicial */
      border: 2px solid #ccc;
      border-radius: 8px;
      padding: 0.4rem;
      margin: 0.3rem 0;
      cursor: not-allowed;
      transition: background-color 0.3s ease, text-decoration 0.3s ease;
      color: #666;
    }
    .curso.desbloqueado {
      background-color: #fcd6ea; /* rosa claro */
      color: #000;
      cursor: pointer;
    }
    .curso.aprobado {
      background-color: #d0f0ff !important; /* celeste pastel */
      border-color: #7ac9e6;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <h1>Malla Visual Interactiva - Ingeniería Industrial</h1>
  <div class="grid" id="contenedor"></div>

  <script>
    const malla = {
      1: [
        { nombre: "Intro a Ing. Industrial", prerequisitos: [] },
        { nombre: "Matemática", prerequisitos: [] },
        { nombre: "Cálculo", prerequisitos: [] },
        { nombre: "Dibujo Industrial I", prerequisitos: [] },
        { nombre: "Identidad y Peruanidad", prerequisitos: [] },
        { nombre: "Taller de Argumentación", prerequisitos: [] },
        { nombre: "Taller de Artes", prerequisitos: [] }
      ],
      2: [
        { nombre: "Cálculo Integral", prerequisitos: ["Cálculo"] },
        { nombre: "Dibujo Industrial II", prerequisitos: ["Dibujo Industrial I"] },
        { nombre: "Química General", prerequisitos: [] },
        { nombre: "Física", prerequisitos: [] },
        { nombre: "Taller de Deportes", prerequisitos: [] },
        { nombre: "Taller de Lectura y Redacción", prerequisitos: [] }
      ]
      // Puedes seguir agregando más semestres aquí...
    };

    const completados = new Set();
    const contenedor = document.getElementById("contenedor");
    const cursoElements = {};

    function renderMalla() {
      for (let i = 1; i <= 10; i++) {
        const col = document.createElement("div");
        col.className = "semestre";
        const titulo = document.createElement("h2");
        titulo.textContent = `Semestre ${i}`;
        col.appendChild(titulo);

        (malla[i] || []).forEach(curso => {
          const div = document.createElement("div");
          div.className = "curso";
          div.textContent = curso.nombre;
          cursoElements[curso.nombre] = div;

          div.addEventListener("click", () => {
            if (!div.classList.contains("desbloqueado")) return;
            div.classList.toggle("aprobado");
            if (div.classList.contains("aprobado")) {
              completados.add(curso.nombre);
            } else {
              completados.delete(curso.nombre);
            }
            actualizarDesbloqueo();
          });

          col.appendChild(div);
        });

        contenedor.appendChild(col);
      }
      actualizarDesbloqueo();
    }

    function actualizarDesbloqueo() {
      for (let semestre in malla) {
        malla[semestre].forEach(curso => {
          const div = cursoElements[curso.nombre];
          const desbloqueado = curso.prerequisitos.every(pre => completados.has(pre));
          if (desbloqueado && !div.classList.contains("aprobado")) {
            div.classList.add("desbloqueado");
            div.style.cursor = "pointer";
          } else if (!div.classList.contains("aprobado")) {
            div.classList.remove("desbloqueado");
            div.style.cursor = "not-allowed";
          }
        });
      }
    }

    renderMalla();
  </script>
</body>
</html>
