
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular - Ingeniería Industrial UCSM</title>
  <style>
    body {
      background-color: #fff0f5;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #b03060;
      margin-bottom: 30px;
    }

    .curso {
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 8px;
      background-color: white;
      color: #444;
      cursor: pointer;
      border-left: 5px solid #ff69b4;
      transition: all 0.3s ease;
    }

    .curso:hover {
      background-color: #ffe4ef;
    }

    .curso.completed {
      background-color: #f8bbd0;
      text-decoration: line-through;
      color: #a7004c;
      cursor: default;
    }

    .curso.locked {
      background-color: #e0e0e0;
      color: #888;
      cursor: not-allowed;
    }

    .semestre {
      margin-bottom: 25px;
      padding: 15px;
      background-color: #ffe4ec;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .semestre h2 {
      margin-top: 0;
      color: #c2185b;
    }
  </style>
</head>
<body>

<h1>Malla Curricular - Ingeniería Industrial UCSM</h1>

<div id="malla"></div>

<script>
  const cursos = {
    "Física I": { prereqs: [], semestre: 2 },
    "Física II": { prereqs: ["Física I"], semestre: 3 },
    "Procesos Industriales I": { prereqs: ["Ciencias e Ingeniería de Materiales"], semestre: 4 },
    "Procesos Industriales II": { prereqs: ["Procesos Industriales I"], semestre: 5 },
    "Procesos Industriales III": { prereqs: ["Procesos Industriales II"], semestre: 8 },
    "Cálculo": { prereqs: [], semestre: 1 },
    "Cálculo Integral": { prereqs: ["Cálculo"], semestre: 2 },
    "Cálculo Vectorial": { prereqs: ["Cálculo Integral"], semestre: 3 },
    "Investigación Operativa I": { prereqs: ["Cálculo Vectorial"], semestre: 6 },
    "Investigación Operativa II": { prereqs: ["Investigación Operativa I"], semestre: 7 },
    "Simulación de Sistemas": { prereqs: ["Investigación Operativa II"], semestre: 9 },
    "Ingeniería de Organización Industrial": { prereqs: [], semestre: 3 },
    "Ingeniería de Costos y Presupuestos": { prereqs: ["Ingeniería de Organización Industrial"], semestre: 5 },
    "Planeamiento y Control de la Producción": { prereqs: ["Ingeniería de Costos y Presupuestos"], semestre: 7 },
    "Logística Integrada": { prereqs: ["Planeamiento y Control de la Producción"], semestre: 8 },
    "Logística Internacional": { prereqs: ["Logística Integrada"], semestre: 10 },
    "Ciencias e Ingeniería de Materiales": { prereqs: [], semestre: 3 }
  };

  const mallaDiv = document.getElementById("malla");

  // Agrupar cursos por semestre
  const semestres = {};
  for (const [curso, data] of Object.entries(cursos)) {
    const sem = data.semestre;
    if (!semestres[sem]) semestres[sem] = [];
    semestres[sem].push({ nombre: curso, ...data });
  }

  // Crear elementos de la malla
  for (const [semestre, cursosSem] of Object.entries(semestres)) {
    const contenedor = document.createElement("div");
    contenedor.className = "semestre";

    const titulo = document.createElement("h2");
    titulo.textContent = `Semestre ${semestre}`;
    contenedor.appendChild(titulo);

    cursosSem.forEach(curso => {
      const div = document.createElement("div");
      div.className = "curso locked";
      div.textContent = curso.nombre;
      div.dataset.nombre = curso.nombre;
      div.dataset.prereqs = JSON.stringify(curso.prereqs);
      contenedor.appendChild(div);
    });

    mallaDiv.appendChild(contenedor);
  }

  // Función para verificar si los prerequisitos están completados
  function puedeDesbloquear(prereqs) {
    return prereqs.every(nombre => {
      const c = document.querySelector(`.curso[data-nombre="${nombre}"]`);
      return c && c.classList.contains("completed");
    });
  }

  // Desbloquear cursos que cumplan requisitos
  function actualizarBloqueos() {
    document.querySelectorAll(".curso").forEach(curso => {
      if (!curso.classList.contains("completed")) {
        const prereqs = JSON.parse(curso.dataset.prereqs);
        if (puedeDesbloquear(prereqs)) {
          curso.classList.remove("locked");
        } else {
          curso.classList.add("locked");
        }
      }
    });
  }

  // Activar clics
  document.querySelectorAll(".curso").forEach(curso => {
    curso.addEventListener("click", () => {
      if (curso.classList.contains("locked") || curso.classList.contains("completed")) return;
      curso.classList.add("completed");
      actualizarBloqueos();
    });
  });

  // Inicial
  actualizarBloqueos();
</script>

</body>
</html>
